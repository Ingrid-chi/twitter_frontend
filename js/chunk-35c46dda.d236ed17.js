(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35c46dda"],{1985:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"tweet-replies"},[e("NavBar"),e("div",{staticClass:"tweet-replies__container"},[e("div",{staticClass:"tweet-replies__container__line-left"}),e("div",{staticClass:"tweet-replies__container__content"},[e("div",{staticClass:"content__wrapper__title"},[e("img",{staticClass:"content__icon-back",attrs:{src:t.backIcon,alt:t.back.title}}),e("h4",{staticClass:"content__title"},[t._v("推文")])]),e("TweetReply",{attrs:{tweet:t.tweet}}),e("div",{staticClass:"content__wrapper__reply-like-info"},[e("div",{staticClass:"content__reply-nums"},[t._v(t._s(t.tweet.replyCount))]),e("div",{staticClass:"content__reply-text"},[t._v("回覆")]),e("div",{staticClass:"content__like-nums"},[t._v(t._s(t.tweet.likeCount))]),e("div",{staticClass:"content__like-text"},[t._v("喜歡次數")])]),e("div",{staticClass:"content__wrapper__reply-like-icons"},[e("img",{staticClass:"content__reply-icon",attrs:{src:t.replyIcon,alt:t.reply.title},on:{click:t.showReplyModal}}),t.tweet.isLike?e("img",{staticClass:"content__like-icon",attrs:{src:t.checkedLikeIcon,alt:t.checkedLikeIcon.title},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteLike(t.tweet.id)}}}):e("img",{staticClass:"content__like-icon",attrs:{src:t.likeIcon,alt:t.like.title},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addLike(t.tweet.id)}}})]),t._l(t.replies,(function(s){return e("TweetReplyList",{key:s.id,attrs:{reply:s,tweet:t.tweet}})}))],2),e("div",{staticClass:"tweet-replies__container__line-right"})]),e("PopularUser")],1),e("ReplyModal",{directives:[{name:"show",rawName:"v-show",value:t.replyShow,expression:"replyShow"}],attrs:{tweet:t.tweet},on:{"hide-reply-modal":t.hideReplyModal,"submit-reply":t.submitReply}})],1)},i=[],n=s("d000"),r=s("0bf5"),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content__wrapper__tweet"},[e("div",{staticClass:"content__tweet"},[e("router-link",{attrs:{to:"/"+t.tweet.UserId}},[e("div",{staticClass:"content__tweet__wrapper__img"},[e("img",{staticClass:"content__tweet__img",attrs:{src:t.tweet.User.avatar,alt:"userImg"}})])]),e("div",{staticClass:"content__tweet__name"},[t._v(t._s(t.tweet.User.name))]),e("div",{staticClass:"content__tweet__account"},[t._v("@"+t._s(t.tweet.User.account))]),e("div",{staticClass:"content__tweet__text"},[t._v(" "+t._s(t.tweet.description)+" ")]),e("div",{staticClass:"content__tweet__time"},[t._v(t._s(t._f("fromNow")(t.tweet.createdAt)))])],1)])},l=[],o=s("2708"),_={name:"TweetReply",mixins:[o["a"]],props:{tweet:{type:Object,default:()=>{}}}},d=_,p=(s("8135"),s("2877")),w=Object(p["a"])(d,c,l,!1,null,"9cef82a2",null),u=w.exports,v=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content__wrapper__reply-list"},[e("router-link",{attrs:{to:"/"+t.reply.UserId}},[e("div",{staticClass:"content__wrapper__img"},[e("img",{staticClass:"content__img",attrs:{src:t.reply.User.avatar,alt:""}})])]),e("div",{staticClass:"content__wrapper__other-info"},[e("div",{staticClass:"content__other-name"},[t._v(t._s(t.reply.User.name))]),e("div",{staticClass:"content__other-account"},[t._v("@"+t._s(t.reply.User.account))]),e("div",{staticClass:"content__other-dot"},[t._v("‧")]),e("div",{staticClass:"content__other-time"},[t._v(t._s(t._f("fromNow")(t.reply.createdAt)))])]),e("div",{staticClass:"content__wrapper__user-account"},[e("div",{staticClass:"content__user-reply"},[t._v("回覆")]),e("div",{staticClass:"content__user-account"},[t._v("@"+t._s(t.tweet.User.account))])]),e("div",{staticClass:"content__wrapper__user-text"},[t._v(" "+t._s(t.reply.comment)+" ")])],1)},h=[],m={name:"TweetReplyList",mixins:[o["a"]],props:{reply:{type:Object,default:()=>{}},tweet:{type:Object,default:()=>{}}}},y=m,C=(s("e878"),Object(p["a"])(y,v,h,!1,null,"6d2f7643",null)),f=C.exports,k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-bg"},[e("div",{staticClass:"modal-container"},[e("div",{staticClass:"modal-header"},[e("img",{attrs:{src:t.deleteOrange,alt:t.deleteOrange.title},on:{click:t.hideReplyModal}})]),e("div",{staticClass:"modal-main"},[e("div",{staticClass:"modal-other"},[e("img",{attrs:{src:t.tweet.User.avatar,alt:""}}),e("div",{staticClass:"line"}),e("div",{staticClass:"content__wrapper__other-info"},[e("div",{staticClass:"content__other-name"},[t._v(t._s(t.tweet.User.name))]),e("div",{staticClass:"content__other-account"},[t._v("@"+t._s(t.tweet.User.account))]),e("div",{staticClass:"content__other-dot"},[t._v("‧")]),e("div",{staticClass:"content__other-time"},[t._v("3小時")])]),e("div",{staticClass:"content__wrapper__user-text"},[t._v(" "+t._s(t.tweet.description)+" ")]),t._m(0)]),e("div",{staticClass:"modal-reply"},[e("img",{staticClass:"content__tweet__img",attrs:{src:"https://randomuser.me/api/portraits/lego/2.jpg",alt:"userImg"}}),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tweetText,expression:"tweetText"}],attrs:{name:"",id:"",cols:"30",rows:"3",wrap:"hard",maxlength:"140",placeholder:"有甚麼新鮮事?"},domProps:{value:t.tweetText},on:{focus:t.showWarn,input:function(e){e.target.composing||(t.tweetText=e.target.value)}}})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.warn,expression:"warn"}],staticClass:"modal-warn"},[t._v("字數不可超過140字")]),e("button",{staticClass:"modal-btn",on:{click:t.submit}},[t._v("回覆")])])])},g=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"content__wrapper__user-account"},[e("div",{staticClass:"content__user-reply"},[t._v("回覆")]),e("div",{staticClass:"content__user-account"},[t._v("@apple")])])}],b=s("acd4"),x=s("2f62"),T=s("7482"),R=s("2fa3"),I={name:"ReplyModal",data(){return{delete:b["a"].deleteOrange,warn:!1,id:-1,tweetText:"",userId:-1,createdAt:"2022-07-31T11:13:44.000Z",likeCount:0,replyCount:3,User:{name:"user1",account:"user1",avatar:"https://loremflickr.com/320/240/cat/?lock=93.54589374664013"}}},props:{replyShow:{type:Boolean,default:!1},tweet:{type:Object,default:()=>{}}},computed:{deleteOrange(){return s("1771")("./"+this.delete.image)}},methods:{...Object(x["b"])(["createTweet"]),hideReplyModal(){this.$emit("hide-reply-modal"),this.warn=!1,this.tweetText=""},async submit(){try{await T["a"].replyTweet(this.tweet.id,this.tweetText),this.warn=!1,this.tweetText="",this.$emit("submit-reply")}catch(t){R["a"].fire({icon:"warning",title:""+t.response.data.message})}},showWarn(){this.warn=!0}}},L=I,U=(s("6f4a"),Object(p["a"])(L,k,g,!1,null,"37819a3b",null)),O=U.exports,j=s("4cce"),M={name:"TweetReplies",data(){return{replyShow:!1,back:b["a"].back,reply:b["a"].reply,like:b["a"].like,checkedLike:b["a"].checkedLike,tweetId:0,tweet:{},replies:[]}},async created(){await this.fetchTweetAndReplies()},components:{NavBar:n["a"],PopularUser:r["a"],TweetReply:u,TweetReplyList:f,ReplyModal:O},computed:{backIcon(){return s("1771")("./"+this.back.image)},replyIcon(){return s("1771")("./"+this.reply.image)},likeIcon(){return s("1771")("./"+this.like.image)},checkedLikeIcon(){return s("1771")("./"+this.checkedLike.image)}},methods:{hideReplyModal(){this.replyShow=!1},showReplyModal(){this.replyShow=!0},async submitReply(){await this.fetchTweetAndReplies(),this.replyShow=!1},async fetchTweetAndReplies(){this.tweetId=this.$route.params.tweetId;const t=await T["a"].getTweetById(this.tweetId),{data:e,replies:s}=t;this.tweet=e,this.replies=s},async addLike(t){try{await j["a"].addTweetLike(t),this.tweet={...this.tweet,isLike:!0,likeCount:this.tweet.likeCount+1}}catch(e){const{response:t}=e;t&&t.data.message&&R["a"].fire({icon:"error",title:t.data.message})}},async deleteLike(t){try{await j["a"].deleteTweetLike(t),this.tweet={...this.tweet,isLike:!1,likeCount:this.tweet.likeCount-1}}catch(e){const{response:t}=e;t&&R["a"].fire({icon:"error",title:t.data.message})}}}},N=M,S=(s("6a8f"),Object(p["a"])(N,a,i,!1,null,"0aba596e",null));e["default"]=S.exports},"2a19":function(t,e,s){},4860:function(t,e,s){},"6a8f":function(t,e,s){"use strict";s("2a19")},"6f4a":function(t,e,s){"use strict";s("4860")},8135:function(t,e,s){"use strict";s("a1f2")},a1f2:function(t,e,s){},e878:function(t,e,s){"use strict";s("f7b8")},f7b8:function(t,e,s){}}]);
//# sourceMappingURL=chunk-35c46dda.d236ed17.js.map