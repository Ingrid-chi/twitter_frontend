(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d17cb94"],{"0ba8":function(t,e,s){"use strict";s("91c2")},"0ef3":function(t,e,s){"use strict";s("47cb")},"24a9":function(t,e,s){"use strict";s("7fee")},"46c0":function(t,e,s){"use strict";s("a1bb")},4778:function(t,e,s){"use strict";s("5089")},"47cb":function(t,e,s){},5089:function(t,e,s){},5613:function(t,e,s){},"7fee":function(t,e,s){},"91c2":function(t,e,s){},a1bb:function(t,e,s){},baa5:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"currentUser-wrapper"},[e("div",{staticClass:"currentUser"},[e("NavBar"),e("div",{staticClass:"currentUser__container"},[e("div",{staticClass:"currentUser__container__line-left"}),e("div",{staticClass:"currentUser__container__content"},[e("currentUserInfo",{attrs:{user:t.user},on:{"fetch-user":t.fetchUserFromCurrent}}),e("div",{staticClass:"currentUser__container__content__items"},t._l(t.currentUserContentItems,(function(s){return e("button",{key:s.id,class:["currentUser__container__content__items__btn primary-bold",{checked:s.id===t.itemId}],on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.getItemId(s.id)}}},[t._v(" "+t._s(s.title)+" ")])})),0),e("div",{staticClass:"currentUser__container__content__bottom"}),1===t.itemId?e("CurrentUserTweets"):2===t.itemId?e("CurrentUserReply"):e("CurrentUserLike")],1),e("div",{staticClass:"currentUser__container__line-right"})]),e("PopularUser")],1)])},r=[],i=s("d000"),n=s("0bf5"),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"currentUserInfo-wrapper"},[e("div",{staticClass:"currentUserInfo-title"},[t._m(0),e("div",{staticClass:"currentUserInfo-title__detail"},[e("h5",{staticClass:"currentUserInfo-title__detail__name"},[t._v(" "+t._s(t.user.name)+" ")]),e("div",{staticClass:"currentUserInfo-title__detail__tweetsTotal secondary-bold"},[t._v(" "+t._s(t.user.TweetsCount+"推文")+" ")])])]),e("div",{staticClass:"currentUserInfo-detail"},[e("div",{staticClass:"currentUserInfo-detail__background"},[e("img",{staticClass:"currentUserInfo-detail__background__img",attrs:{src:t.user.cover,alt:""}})]),e("div",{staticClass:"currentUserInfo-detail__avatar"},[e("img",{staticClass:"currentUserInfo-detail__avatar__img",attrs:{src:t.user.avatar,alt:""}})]),e("div",{staticClass:"currentUserInfo-detail__nameDetail"},[e("h5",{staticClass:"currentUserInfo-detail__nameDetail__name"},[t._v(" "+t._s(t.user.name)+" ")]),e("p",{staticClass:"currentUserInfo-detail__nameDetail__account"},[t._v(" "+t._s("@"+t.user.account)+" ")]),e("p",{staticClass:"currentUserInfo-detail__nameDetail__description"},[t._v(" "+t._s(t.user.introduction)+" ")])]),t.isSelf?e("button",{staticClass:"currentUserInfo-detail__edit",on:{click:t.showModal}},[t._v(" 編輯個人資料 ")]):e("div",{staticClass:"otherUserInfo__wrapper"},[e("div",{staticClass:"otherUserInfo__img__wrapper"},[e("img",{staticClass:"otherUserInfo__img--letter",attrs:{src:s("3948"),alt:""}})]),e("div",{staticClass:"otherUserInfo__img__wrapper"},[e("img",{staticClass:"otherUserInfo__img--bell",attrs:{src:s("6d0d"),alt:""}})]),e("div",{staticClass:"otherUserInfo__btn--following"},[t._v("正在跟隨")])])]),e("div",{staticClass:"currentUserInfo-followTotal",attrs:{followItems:t.currentUserFollowPanelItems}},[e("div",{staticClass:"currentUserInfo-followTotal__following"},[e("router-link",{attrs:{to:{name:"followings",params:{account:t.user.id}}}},[e("label",{staticClass:"currentUserInfo-followTotal__following__count"},[t._v(t._s(t.user.FollowingCount+"個"))]),e("label",{staticClass:"currentUserInfo-followTotal__following__text"},[t._v("跟隨中")])])],1),e("div",{staticClass:"currentUserInfo-followTotal__follower"},[e("router-link",{attrs:{to:{name:"followers",params:{account:t.user.id}}}},[e("label",{staticClass:"currentUserInfo-followTotal__follower__count"},[t._v(t._s(t.user.FollowerCount+"位"))]),e("label",{staticClass:"currentUserInfo-followTotal__follower__text"},[t._v("跟隨者")])])],1)]),e("EditModal",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],attrs:{show:t.show},on:{"hide-modal":t.hideModal}})],1)},l=[function(){var t=this,e=t._self._c;return e("button",{staticClass:"currentUserInfo-title__icon"},[e("img",{attrs:{src:s("336c"),alt:""}})])}],o=s("95ab"),_=function(){var t,e,s,a,r=this,i=r._self._c;return i("div",{staticClass:"modal-bg"},[i("form",{staticClass:"modal-container",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),r.save.apply(null,arguments)}}},[i("div",{staticClass:"modal-header"},[i("img",{attrs:{src:r.deleteOrange,alt:r.deleteOrange.title},on:{click:function(t){return r.hideModal(!1)}}}),i("div",{staticClass:"title"},[r._v("編輯個人資料")]),i("button",{staticClass:"save-btn",attrs:{type:"submit"}},[r._v("儲存")])]),i("div",{staticClass:"modal-main"},[i("img",{staticClass:"cover",attrs:{src:r.cover,alt:""}}),i("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"imgUpload",name:"cover"},on:{change:r.changeCover}}),i("label",{attrs:{for:"imgUpload"}},[i("img",{staticClass:"camera",attrs:{src:r.camera}}),i("img",{staticClass:"plus",attrs:{src:r.plus,alt:""}})]),i("img",{staticClass:"delete-white",attrs:{src:r.deleteWhite,alt:""}}),i("div",{staticClass:"avator-wrapper"},[i("img",{staticClass:"avator",attrs:{src:r.avatar,alt:"userImg"}}),i("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"avatarUpload",name:"avatar"},on:{change:r.changeAvatar}}),i("label",{attrs:{for:"avatarUpload"}},[i("img",{staticClass:"avator-camera",attrs:{src:r.camera,alt:""}}),i("img",{staticClass:"avator-plus",attrs:{src:r.plus,alt:""}})])]),i("div",{staticClass:"modal-main-form"},[i("div",{staticClass:"modal-main-name"},[i("label",{attrs:{for:"name"}},[r._v("名稱")]),i("input",{directives:[{name:"model",rawName:"v-model",value:r.name,expression:"name"}],attrs:{id:"name",name:"name",type:"text",placeholder:""},domProps:{value:r.name},on:{input:function(t){t.target.composing||(r.name=t.target.value)}}})]),i("p",{staticClass:"counter"},[r._v(r._s(null!==(t=null===(e=r.name)||void 0===e?void 0:e.length)&&void 0!==t?t:"0")+"/50")]),i("div",{staticClass:"modal-main-description"},[i("label",{attrs:{for:""}},[r._v("自我介紹")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:r.introduction,expression:"introduction"}],attrs:{name:"introduction",id:"",cols:"30",rows:"3",wrap:"hard",maxlength:"160",placeholder:""},domProps:{value:r.introduction},on:{input:function(t){t.target.composing||(r.introduction=t.target.value)}}})]),i("p",{staticClass:"counter"},[r._v(r._s(null!==(s=null===(a=r.introduction)||void 0===a?void 0:a.length)&&void 0!==s?s:"0")+"/160")])])])])])},u=[],d=s("acd4"),m=s("2f62"),p=s("4cce"),f=s("2fa3"),v={name:"EditModal",data(){return{delete:d["a"].deleteOrange,name:"",introduction:"",avatar:"",cover:""}},props:{show:{type:Boolean,default:!1}},computed:{...Object(m["c"])(["currentUser"]),deleteOrange(){return s("1771")("./"+this.delete.image)},deleteWhite(){return s("1771")("./"+d["a"].deleteWhite.image)},camera(){return s("1771")("./"+d["a"].camera.image)},plus(){return s("1771")("./"+d["a"].plus.image)}},watch:{currentUser(){this.name=this.currentUser.name,this.introduction=this.currentUser.introduction,this.avatar=this.currentUser.avatar,this.cover=this.currentUser.cover},name(){if(this.name.length>=50)return f["a"].fire({icon:"error",title:"字數上限為50字"}),void(this.name="")},description(){if(this.description.length>=50)return f["a"].fire({icon:"error",title:"字數上限為50字"}),void(this.description="")}},methods:{...Object(m["b"])(["createTweet","setTweets","setCurrentUser"]),hideModal(t){this.$emit("hide-modal",t)},async save(t){const e=t.target,s=new FormData(e);for(let[r,i]of s.entries())console.log(r+": "+i);const a=await p["a"].editUserSettings({id:this.currentUser.id,formData:s});this.setCurrentUser(a.data),console.log(a.data),this.hideModal(!0)},changeCover(t){const e=t.target.files,s=window.URL.createObjectURL(e[0]);this.cover=s},changeAvatar(t){const e=t.target.files;console.log(e[0].size);const s=window.URL.createObjectURL(e[0]);this.avatar=s}}},h=v,C=(s("de9f"),s("2877")),w=Object(C["a"])(h,_,u,!1,null,"01b9964d",null),U=w.exports,g={name:"CurrentUserInfo",components:{EditModal:U},data(){return{currentUserFollowPanelItems:o["c"],isSelf:!1,show:!1,user:{}}},async created(){const{currentUserData:t}=await p["a"].getCurrentUser();this.setCurrentUser(t);const e=await p["a"].getUser(this.$route.params.userId),{user:s}=e;this.user={...this.currentUser,...s},this.getIsSelf()},computed:{...Object(m["c"])(["currentUser"])},methods:{...Object(m["b"])(["setCurrentUser"]),getFollowPanelItemId(t){this.itemId=t},showModal(){this.show=!0},hideModal(t=!1){this.show=!1,t&&this.$emit("fetch-user")},getIsSelf(){Number(this.$route.params.userId)===Number(this.currentUser.id)?this.isSelf=!0:this.isSelf=!1}},watch:{"$route.params.userId":async function(){const t=await p["a"].getUser(this.$route.params.userId),{user:e}=t;this.user=e,this.$emit("fetch-user"),this.getIsSelf()},currentUser(){this.isSelf&&(this.user=this.currentUser)}}},k=g,b=(s("0ba8"),Object(C["a"])(k,c,l,!1,null,"77bc50be",null)),I=b.exports,y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"currentUserTweets-wrapper"},t._l(t.tweets,(function(a){return e("div",{key:a.id,staticClass:"tweets-container-for"},[e("router-link",{attrs:{to:"/tweets/"+a.id}},[e("div",{staticClass:"tweets-container"},[e("div",{staticClass:"tweets-container__avatar"},[e("img",{attrs:{src:a.User.avatar,alt:""}})]),e("div",{staticClass:"tweets-container__detail"},[e("div",{staticClass:"tweets-container__detail__title"},[e("label",{staticClass:"tweets-container__detail__title__name primary-bold"},[t._v(t._s(a.User.name))]),e("label",{staticClass:"tweets-container__detail__title__account"},[t._v(t._s("@"+a.User.account)+"．")]),e("label",{staticClass:"tweets-container__detail__title__created-at"},[t._v(t._s(t._f("fromNow")(a.createdAt))+" ")])]),e("p",{staticClass:"tweets-container__detail__description"},[t._v(" "+t._s(a.description)+" ")]),e("div",{staticClass:"tweets-container__detail__count-panel"},[e("div",{staticClass:"tweets-container__detail__count-panel__reply"},[e("div",{staticClass:"tweets-container__detail__count-panel__reply__icon"},[e("img",{attrs:{src:s("7006"),alt:""}})]),e("div",{staticClass:"tweets-container__detail__count-panel__reply__count"},[t._v(" "+t._s(a.repliesCount)+" ")])]),e("div",{staticClass:"tweets-container__detail__count-panel__like"},[a.isLike?e("button",{staticClass:"tweets-container__detail__count-panel__like__icon",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteLike(a.id)}}},[e("img",{attrs:{src:s("53d0"),alt:""}})]):e("button",{staticClass:"tweets-container__detail__count-panel__like__icon",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addLike(a.id)}}},[e("img",{attrs:{src:s("8e44"),alt:""}})]),e("div",{staticClass:"tweets-container__detail__count-panel__like__count"},[t._v(" "+t._s(a.likesCount)+" ")])])])])]),e("div",{staticClass:"currentUserTweets-wrapper__bottom"})])],1)})),0)},T=[],L=s("2708"),O={name:"CurrentUserTweets",mixins:[L["a"]],components:{},props:{tweet:{type:Object,default:()=>({})}},data(){return{tweets:[]}},created(){this.fetchCurrentUserTweets(this.$route.params.userId)},beforeRouteUpdate(t,e,s){const{id:a}=t.params;this.fetchCurrentUserTweets(a),s()},methods:{async fetchCurrentUserTweets(t){try{const e=await p["a"].getUserTweets(t);this.tweets=e.tweets}catch(e){const{response:t}=e;t.data.message&&f["a"].fire({icon:"error",title:t.data.message})}},async addLike(t){try{await p["a"].addTweetLike(t),this.tweets=this.tweets.map(e=>e.id===t?{...e,isLike:!0,likesCount:e.likesCount+1}:e)}catch(e){const{response:t}=e;t.data.message&&f["a"].fire({icon:"error",title:t.data.message})}},async deleteLike(t){try{await p["a"].deleteTweetLike(t),this.tweets=this.tweets.map(e=>e.id===t?{...e,isLike:!1,likesCount:e.likesCount-1}:e)}catch(e){const{response:t}=e;t.data.message&&f["a"].fire({icon:"error",title:t.data.message})}}},computed:{...Object(m["c"])(["currentUser"])},watch:{"$route.params.userId":async function(){this.fetchCurrentUserTweets(this.$route.params.userId)}}},$=O,j=(s("24a9"),Object(C["a"])($,y,T,!1,null,"165811e8",null)),x=j.exports,R=function(){var t=this,e=t._self._c;return e("div",{staticClass:"currentUserReply-wrapper"},t._l(t.replies,(function(s){return e("div",{key:s.id,staticClass:"reply-container-for"},[e("div",{staticClass:"reply-container"},[e("div",{staticClass:"reply-container__avatar"},[e("img",{attrs:{src:s.Tweet.User.avatar,alt:""}})]),e("div",{staticClass:"reply-container__detail"},[e("div",{staticClass:"reply-container__detail__title"},[e("label",{staticClass:"reply-container__detail__title__name primary-bold"},[t._v(t._s(s.User.name))]),e("label",{staticClass:"reply-container__detail__title__account"},[t._v(t._s("@"+s.User.account)+"．")]),e("label",{staticClass:"reply-container__detail__title__created-at"},[t._v(t._s(t._f("fromNow")(s.createdAt))+" ")])]),e("div",{staticClass:"reply-container__detail__user"},[e("label",{staticClass:"reply-container__detail__user__title"},[t._v("回復")]),e("label",{staticClass:"reply-container__detail__user__account"},[t._v(t._s("@"+s.Tweet.User.account))])]),e("p",{staticClass:"reply-container__detail__description"},[t._v(" "+t._s(s.Tweet.description)+" ")])])]),e("div",{staticClass:"currentUserReply-wrapper__bottom"})])})),0)},D=[],P={name:"CurrentUserReply",mixins:[L["a"]],components:{},data(){return{replies:[]}},created(){this.fetchCurrentUserReplied(this.$route.params.userId)},methods:{async fetchCurrentUserReplied(){try{const t=await p["a"].getUserReplied(this.$route.params.userId);this.replies=t.replies}catch(t){const{response:e}=t;e.data.message&&f["a"].fire({icon:"error",title:e.data.message})}}},computed:{...Object(m["c"])(["currentUser"])},watch:{"$route.params.userId":async function(){this.fetchCurrentUserReplied(this.$route.params.userId)}}},S=P,M=(s("46c0"),Object(C["a"])(S,R,D,!1,null,"1a5a8da4",null)),N=M.exports,F=function(){var t=this,e=t._self._c;return e("div",{staticClass:"currentUserLike-wrapper"},t._l(t.likedTweets,(function(a){return e("div",{key:a.id,staticClass:"like-container-for"},[e("div",{staticClass:"like-container"},[e("div",{staticClass:"like-container__avatar"},[e("img",{attrs:{src:a.Tweet.User.avatar,alt:""}})]),e("div",{staticClass:"like-container__detail"},[e("div",{staticClass:"like-container__detail__title"},[e("label",{staticClass:"like-container__detail__title__name primary-bold"},[t._v(t._s(a.Tweet.User.name))]),e("label",{staticClass:"like-container__detail__title__account"},[t._v(t._s("@"+a.Tweet.User.account)+"．")]),e("label",{staticClass:"like-container__detail__title__created-at"},[t._v(t._s(t._f("fromNow")(a.createdAt))+" ")])]),e("p",{staticClass:"like-container__detail__description"},[t._v(" "+t._s(a.Tweet.description)+" ")]),e("div",{staticClass:"like-container__detail__count-panel"},[e("div",{staticClass:"like-container__detail__count-panel__reply"},[t._m(0,!0),e("div",{staticClass:"like-container__detail__count-panel__reply__count"},[t._v(" "+t._s(a.Tweet.repliesCount)+" ")])]),e("div",{staticClass:"like-container__detail__count-panel__like"},[a.isLike?e("button",{staticClass:"like-container__detail__count-panel__like__icon",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteLike(a.TweetId)}}},[e("img",{attrs:{src:s("53d0"),alt:""}})]):e("button",{staticClass:"like-container__detail__count-panel__like__icon",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addLike(a.TweetId)}}},[e("img",{attrs:{src:s("8e44"),alt:""}})]),e("div",{staticClass:"like-container__detail__count-panel__like__count"},[t._v(" "+t._s(a.likesCount)+" ")])])])])]),e("div",{staticClass:"currentUserLike-wrapper__bottom"})])})),0)},A=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"like-container__detail__count-panel__reply__icon"},[e("img",{attrs:{src:s("7006"),alt:""}})])}],B={name:"CurrentUserLike",mixins:[L["a"]],components:{},data(){return{likedTweets:[]}},created(){this.fetchCurrentUserLike(this.$route.params.userId)},methods:{async fetchCurrentUserLike(t){try{const e=await p["a"].getUserLikes(t);this.likedTweets=e.likedTweets,console.log("response",e)}catch(e){const{response:t}=e;t.data.message&&f["a"].fire({icon:"error",title:t.data.message})}},async addLike(t){try{await p["a"].addTweetLike(t),this.likedTweets=this.likedTweets.map(e=>e.TweetId===t?{...e,isLike:!0,likesCount:e.likesCount+1}:e)}catch(e){const{response:t}=e;t.data.message&&f["a"].fire({icon:"error",title:t.data.message})}},async deleteLike(t){try{await p["a"].deleteTweetLike(t),this.likedTweets=this.likedTweets.map(e=>e.TweetId===t?{...e,isLike:!1,likesCount:e.likesCount-1}:e)}catch(e){const{response:t}=e;t.data.message&&f["a"].fire({icon:"error",title:t.data.message})}}},computed:{...Object(m["c"])(["currentUser"])},watch:{"$route.params.userId":async function(){this.fetchCurrentUserLike(this.$route.params.userId)}}},E=B,W=(s("4778"),Object(C["a"])(E,F,A,!1,null,"2d746cda",null)),J=W.exports,z={name:"CurrentUser",components:{NavBar:i["a"],PopularUser:n["a"],CurrentUserInfo:I,CurrentUserTweets:x,CurrentUserReply:N,CurrentUserLike:J},data(){return{currentUserContentItems:o["b"],itemId:1,user:{}}},created(){this.fetchUser(this.$route.params.userId)},methods:{getItemId(t){this.itemId=t},async fetchUser(t){try{const e=await p["a"].getUser(t),{user:s}=e;this.user=s}catch(e){f["a"].fire({icon:"error",title:"無法取得當前使用者資訊，請稍後再試。"})}},fetchUserFromCurrent(){this.user=this.currentUser}},computed:{...Object(m["c"])(["currentUser"])}},q=z,G=(s("0ef3"),Object(C["a"])(q,a,r,!1,null,"755b7cfe",null));e["default"]=G.exports},de9f:function(t,e,s){"use strict";s("5613")}}]);
//# sourceMappingURL=chunk-0d17cb94.58a08405.js.map